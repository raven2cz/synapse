# ⬢ Synapse — Avatar Engine Configuration
#
# This file configures the AI assistant powered by avatar-engine.
# Copy to ~/.synapse/store/state/avatar.yaml and customize as needed.
#
# Documentation: docs/avatar/configuration.md

# Default AI provider (gemini | claude | codex)
provider: "gemini"

# System prompt (injected into all providers)
# Skills from ~/.synapse/avatar/skills/ are appended automatically.
system_prompt: |
  You are a Synapse AI assistant — an expert in AI model management,
  ComfyUI workflows, Stable Diffusion, and image generation.

  You have access to Synapse tools via MCP. Use them to help the user
  manage their model inventory, import packs, resolve dependencies,
  and optimize generation parameters.

  The user's model store is at ~/.synapse/store.
  Always be helpful, concise, and proactive.

# MCP servers (Synapse tools available to the AI)
mcp_servers:
  synapse-store:
    command: "python"
    args: ["-m", "src.avatar.mcp"]
    env:
      SYNAPSE_ROOT: "~/.synapse"

# --- Provider-specific configuration ---
# NOTE: The `model` field is an initial default only. The model dropdown
# is populated dynamically from provider documentation pages (24h cache).

gemini:
  model: "gemini-3-pro-preview"
  # approval_mode: "yolo"    # yolo | ask | deny
  # acp_enabled: true

claude:
  model: "claude-sonnet-4-5"
  # permission_mode: "acceptEdits"
  # allowed_tools:
  #   - "Read"
  #   - "Grep"
  #   - "mcp__synapse-store__*"
  # Additional directories Claude can access (beyond working_dir)
  additional_dirs:
    - "~/.synapse"

codex:
  model: ""
  # auth_method: "chatgpt"

# --- Engine settings ---

engine:
  working_dir: "~/.synapse"
  max_history: 100
  auto_restart: true
  # Safety mode: safe (default) | ask (Gemini only) | unrestricted
  safety_instructions: "safe"

  # AI parameter extraction settings
  extraction:
    cache_enabled: true
    cache_ttl_days: 30
    cache_directory: "~/.synapse/store/data/cache/ai"
    always_fallback_to_rule_based: true

  # Task registry — registered task types are auto-discovered.
  # Currently: parameter_extraction (with generation-params skill + rule-based fallback).
  # Future task types (tagging, translation, etc.) will register here.
  # tasks: (auto-discovered, no configuration needed)
