[pytest]
# =============================================================================
# Pytest Configuration for Synapse
# =============================================================================

# Test discovery
testpaths = tests
pythonpath = .
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Output formatting
addopts = -v --tb=short --strict-markers

# =============================================================================
# Markers (also registered in conftest.py for IDE support)
# =============================================================================
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests requiring multiple components or external services
    e2e: marks end-to-end tests requiring full system
    external: marks tests that call real external services (CDN, APIs) â€” excluded from CI by default
    civitai: marks tests involving Civitai API (subset of external)
    database: marks tests requiring database setup

# =============================================================================
# Filtering
# =============================================================================
# Ignore deprecated directories
norecursedirs =
    .git
    __pycache__
    .pytest_cache
    node_modules
    apps/api/src/routers

# =============================================================================
# Warnings
# =============================================================================
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
